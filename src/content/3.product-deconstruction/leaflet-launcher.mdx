# 2. 三叶启动器  
#### 1. 打造独立启动器品牌  
##### 功能：  
除了要实现市面上其他启动器的基础功能外，可以考虑加入下面这些功能，以此成为 PCL2 等其他第三方启动器的上位替代：  
**完备的资源管理界面：**  
- [x] 模组管理
- [x] 存档管理
- [x] 截图管理
- [x] 光影管理
- [x] 材质&&资源包管理
这个功能大多数第三方启动器还没有，在 PCL2 的 [Issue #4770 提案](https://github.com/Hex-Dragon/PCL2/pull/4770)中有人试图实现：  
![某位开源作者自制的社区版PCL启动器](https://pic.kiss1314.top/d/LeavesResource/webImage/20250311200206.png)

但不知何故，作者龙猫的反响却很冷淡  
![龙猫的回复](https://pic.kiss1314.top/d/LeavesResource/webImage/20250311200044.png)

##### 技术实现：  
启动器完全可以基于市面上其他启动器二改，可选项：  
- **modrinth 启动器**  
  优势：  
    - 采用 Rust 编写，更好的跨平台支持度，更高的性能。  
    - 完全开源。完备的社区沉淀。  
    - 集成了完备的 API，实现模组处理的功能会更轻松。  

  缺陷：  
    - Rust 上手难度高，学习曲线陡峭。  
    - 社区沉淀主要在海外，大量英文阅读需求。  

- **PCL2 启动器**  
  优势：  
    - 功能简单，代码较易于理解。  
    - 软件轻量，集成在整合包里分发更简单。  
    - 也基本实现了 modrinth API 实践。  
    - 国内有很高的知名度，二改发行更容易被人接受。  

  缺陷：  
    - 有部分代码闭源。  
    - .NET 开发，仅仅针对 Windows  


#### 2. 联机大厅和一键联机  
##### 功能：  
在客户端里也同样实现网页中的[[#2. 联机大厅|联机大厅]]页面，用户可以在里面发现各种服务器。  
不同的是，客户端里可以直接点“加入服务器”按钮一键加入服务器，三叶启动器会自动帮用户配置好所需的文件，而无需自己配置模组的繁琐步骤。  
##### 技术实现：  
###### 1. 联机大厅功能  
这一部分需要自己开发联机大厅的 UI。  
抓取数据方面，从三叶互联网站抓取网站后端汇总好的大厅数据，呈现在启动器 UI 里。  

###### 2. 一键联机功能  
> 这是项目的核心难点。  

首先，需要从 IM 获取三个信息：  
- 服务器实例的联机 ip 地址
- 服务器的游戏版本，如果是模组服，还需要知道模组加载器类型。  
- 如果是模组服，还需要知道服务器的模组列表。  
这个可以通过 IM 提供的 API 获取。  

抓到这些信息以后，要做的事情如下：  
1. 帮用户装好游戏环境（对应版本的游戏，如果是模组服，还要装好对应版本的模组加载器）  
   这一步不难，启动器应该会支持传参。  
2. 帮用户装好对应的**客户端版本的**模组。  
   这一步涉及服务端模组转客户端版本，要实现需要充分阅读 modrinth 源码和其他开源社区的实现，还是有难度的。  
3. 帮用户填上服务器 ip，然后启动游戏。  
   这一步很简单，我自制的启梦小镇整合包都已经实现了。  

#### 3. 下单服务器  
> [!warning]
>
> 由于开源协议限制，在客户端上实现订单功能还要考虑法律风险，这个功能很可能会弃用，开发优先级会很低  
##### 功能：  
用户能直接在启动器内下单服务器。  
目前更倾向于引导用户到三叶互联网站下单服务器。  

##### 技术实现：  
技术上要实现直接在启动器下单游戏云实例，无非两种方式：  
###### 方式1： 重新开发客户端版本的财务主控系统  
让用户在启动器内也能完成下单购买的逻辑，然后对接到服务器的受控端分配游戏实例。客户端处完成支付回调。  
###### 方式2： 客户端仅仅收发订单数据，财务主控仍然交给网站  
通过 API 和三叶互联网站的财务主控系统通信，客户端仅作为展示订单数据用。这样做，用户在体验上也和方式1 没什么区别，但是要考虑安全性问题。  